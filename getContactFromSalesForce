{
  "name": "getContactFromSalesForce",
  "version": "0.0.1",
  "type": "sensor",
  "script": "var user = options.globalSettings.salesForceUser\nvar token = options.globalSettings.salesForceToken\nvar id = waylayUtil.getProperty(options, \"name\") || waylayUtil.getResource(options)\n\n\nif(user === undefined || token === undefined || id === undefined) {\n    send(new Error(\"token or user not defined\"))\n}\nelse {\n    try{\n        var conn = new jsforce.Connection()\n        conn.login(user, token, function(err, res){\n            if (err) { \n              console.error(err)\n              send(new Error(err))\n            } else{\n                 conn.sobject(\"Contact\").find({ \n                      Name : \"\"+id\n                  }, function(err, ret) {\n                    if (err) { \n                       console.error(err)\n                       send(new Error(err))\n                    } else {\n                        if(ret.length > 0)\n                            send(null, { observedState : \"Found\", rawData : ret[0]})\n                        else\n                            send(null, { observedState : \"Not Found\"})\n                    }\n                  });\n            }\n        });\n    }\n    catch(err){\n        console.error(err)\n        send(new Error(err))\n    }\n}\n\n",
  "metadata": {
    "author": "",
    "category": "SalesForce",
    "description": "Contact sensor for SalesForce, raw Data example:\n\n<pre>\n {\n  \"attributes\": {\n    \"type\": \"Contact\",\n    \"url\": \"/services/data/v34.0/sobjects/Contact/0031i000006vlJOAAY\"\n  },\n  \"Id\": \"0031i000006vlJOAAY\",\n  \"IsDeleted\": false,\n  \"MasterRecordId\": null,\n  \"AccountId\": null,\n  \"LastName\": \"Test\",\n  \"FirstName\": \"Tom\",\n  \"Salutation\": \"Mr.\",\n  \"Name\": \"Tom Test\",\n  \"OtherStreet\": null,\n  \"OtherCity\": null,\n  \"OtherState\": null,\n  \"OtherPostalCode\": null,\n  \"OtherCountry\": null,\n  \"OtherLatitude\": null,\n  \"OtherLongitude\": null,\n  \"OtherAddress\": null,\n  \"MailingStreet\": null,\n  \"MailingCity\": null,\n  \"MailingState\": null,\n  \"MailingPostalCode\": null,\n  \"MailingCountry\": null,\n  \"MailingLatitude\": null,\n  \"MailingLongitude\": null,\n  \"MailingAddress\": null,\n  \"Phone\": null,\n  \"Fax\": null,\n  \"MobilePhone\": null,\n  \"HomePhone\": null,\n  \"OtherPhone\": null,\n  \"AssistantPhone\": null,\n  \"ReportsToId\": null,\n  \"Email\": null,\n  \"Title\": null,\n  \"Department\": null,\n  \"AssistantName\": null,\n  \"LeadSource\": null,\n  \"Birthdate\": null,\n  \"Description\": null,\n  \"OwnerId\": \"0051i000000fYz5AAE\",\n  \"CreatedDate\": \"2019-04-17T13:08:28.000+0000\",\n  \"CreatedById\": \"0051i000000fYz5AAE\",\n  \"LastModifiedDate\": \"2019-04-18T11:44:52.000+0000\",\n  \"LastModifiedById\": \"0051i000000fYz5AAE\",\n  \"SystemModstamp\": \"2019-04-18T11:44:52.000+0000\",\n  \"LastActivityDate\": null,\n  \"LastCURequestDate\": null,\n  \"LastCUUpdateDate\": null,\n  \"LastViewedDate\": \"2019-04-18T12:20:39.000+0000\",\n  \"LastReferencedDate\": \"2019-04-18T12:20:39.000+0000\",\n  \"EmailBouncedReason\": null,\n  \"EmailBouncedDate\": null,\n  \"IsEmailBounced\": false,\n  \"PhotoUrl\": \"/services/images/photo/0031i000006vlJOAAY\",\n  \"Jigsaw\": null,\n  \"JigsawContactId\": null,\n  \"CleanStatus\": \"Pending\",\n  \"Level__c\": null,\n  \"Languages__c\": null\n}\n</pre>\n",
    "iconURL": "https://static.waylay.io/plugs/icons/get-contact-from-salesforce.png",
    "supportedStates": [
      "Found",
      "Not Found"
    ],
    "requiredProperties": [
      "name"
    ],
    "requiredRawData": [],
    "rawData": [
      {
        "parameter": "Id",
        "dataType": "string"
      },
      {
        "parameter": "AccountId",
        "dataType": "string"
      },
      {
        "parameter": "LastName",
        "dataType": "string"
      },
      {
        "parameter": "FirstName",
        "dataType": "string"
      },
      {
        "parameter": "Name",
        "dataType": "string"
      },
      {
        "parameter": "Phone",
        "dataType": "string"
      },
      {
        "parameter": "MobilePhone",
        "dataType": "string"
      },
      {
        "parameter": "Email",
        "dataType": "string"
      },
      {
        "parameter": "Title",
        "dataType": "string"
      },
      {
        "parameter": "Department",
        "dataType": "string"
      },
      {
        "parameter": "Description",
        "dataType": "string"
      },
      {
        "parameter": "MailingAddress",
        "dataType": "string"
      },
      {
        "parameter": "MailingCountry",
        "dataType": "string"
      },
      {
        "parameter": "MailingStreet",
        "dataType": "string"
      },
      {
        "parameter": "MailingState",
        "dataType": "string"
      },
      {
        "parameter": "MailingPostalCode",
        "dataType": "string"
      },
      {
        "parameter": "MailingLatitude",
        "dataType": "string"
      },
      {
        "parameter": "MailingLongitude",
        "dataType": "string"
      }
    ]
  }
}
