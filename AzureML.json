{
  "name": "AzureML",
  "version": "2.0.3",
  "type": "sensor",
  "script": "const axios = require('axios')\n\nfunction execute () {\n  let {\n    observations,\n    AZURE_ML_ENDPOINT,\n    contentType,\n    AZURE_ML_TOKEN\n  } = options.requiredProperties\n\n  if (typeof observations === 'string') {\n    observations = JSON.parse(observations)\n  }\n\n  if (!observations || !AZURE_ML_ENDPOINT || !contentType) { return send(new Error('Please provide AZURE_ML_ENDPOINT, observations and contentType')) }\n\n  const headers = { 'Content-Type': contentType }\n  if (AZURE_ML_TOKEN) headers.Authorization = `Bearer ${AZURE_ML_TOKEN}`\n\n  axios.post(AZURE_ML_ENDPOINT, JSON.stringify(observations), { headers })\n    .then(response => {\n      console.log('Returned predictions: ', response.data)\n\n      send(null, {\n        observedState: 'Predicted',\n        rawData: {\n          data: response.data\n        }\n      })\n    })\n    .catch(error => send(error))\n}\n\nexecute()",
  "metadata": {
    "author": "",
    "category": "",
    "description": "<h4>AzureML Sensor</h4>\nAzure ML endpoint invoker.\n<br>\nUsed to invoke a Azure ML endpoint run on the Azure platform.\n<br><br>\n<b>States</b>\n<br>\n<ul>\n    <li>\n        Not Predicted: Indicates that no results are ready be due to an error.\n    </li>\n    <li>\n        Predicted: Indicates that a request was made and the results are ready to use.\n    </li>\n</ul>\n<br>\n<b>Raw data</b>\n<ul>\n    <li>\n        data: This will contain the result returned by the Azure ML endpoint.\n    </li>\n</ul>\n<br>\n<b>Properties</b>\n<ul>\n    <li>\n        AZURE_ML_ENDPOINT: The url to the Azure ML endpoint.\n    </li>\n    <li>\n        observations: The object with observations formated in the way that Azure ML endpoint expects.\n    </li>\n    <li>\n        contentType: The MIME type of the observations.\n    </li>\n    <li>\n        AZURE_ML_TOKEN: If the endpoint has authorisation this should be the key or token to gain access to it. To generate a key for your service please refere to the <a href=\"https://docs.microsoft.com/en-us/azure/machine-learning/how-to-setup-authentication#web-service-authentication\">official documentation</a>.\n    </li>\n</ul>",
    "documentationURL": "https://docs.waylay.io/plugins/azureml/",
    "iconURL": "https://static.waylay.io/icons/azureml.png",
    "supportedStates": [
      "Not Predicted",
      "Predicted"
    ],
    "requiredProperties": [
      "AZURE_ML_ENDPOINT",
      "observations",
      "contentType",
      "AZURE_ML_TOKEN"
    ],
    "requiredRawData": [],
    "rawData": [
      {
        "parameter": "data",
        "dataType": "object"
      }
    ]
  },
  "dependencies": {
    "axios": "^0.19.2"
  }
}