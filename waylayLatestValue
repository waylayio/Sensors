{
    "name": "waylayLatestValue",
    "version": "1.0.3",
    "type": "sensor",
    "script": "var thing;\ntry {\n    thing = waylayUtil.getRawData(options, options.requiredProperties.item);\n} catch(err){\n    thing = options.requiredProperties.item || options.node.RESOURCE || options.task.RESOURCE;\n}\n\nif(thing) {\n    var url = \"https://data.waylay.io/resources/\"+ thing +\"/current\";\n    request(url, function (error, response, body) {\n      if (!error && response.statusCode == 200) {\n        console.log(body);\n        var rawData = JSON.parse(body);\n        var value = {\n            observedState: \"Collected\",\n            rawData: rawData\n        };\n        console.log(\"value \" + value);\n        send(null, value);\n        }\n    else {\n        console.log(response);\n        send(new Error(response));\n    }\n    }); \n   \n}else{\n  send(new Error(\"Missing property item\"));\n}\n",
    "metadata": {
        "author": "",
        "category": "IOT Platforms",
        "description": "Waylay data sensor\n\nFetches the latest value and provide it as the rawData for waylay platform, \nfor more info, please go to the external documentation page.\n\n<h3>Input parameters</h3>\n<ul>\n<li>item, or if NOT defined, sensor takes the resource name</li>\n</ul>",
        "documentationURL": "",
        "iconURL": "https://raw.githubusercontent.com/waylayio/documentation/master/icons/waylayLatestValue.png",
        "supportedStates": [
            "Collected",
            "Not Collected"
        ],
        "requiredProperties": [
            "item"
        ],
        "requiredRawData": [],
        "rawData": []
    }
}
