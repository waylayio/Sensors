{"name":"AzureML","version":"0.2.9","type":"sensor","script":"const axios = require('axios');\n\nconst observations = waylayUtil.getProperty(options, 'observations');\nconst endpointUrl = waylayUtil.getProperty(options, 'endpointUrl');\nconst contentType = waylayUtil.getProperty(options, 'contentType');\nconst key = waylayUtil.getProperty(options, 'key');\n\naxios.post(endpointUrl, JSON.stringify(observations),\n    {\n        headers:{ \n            'Content-Type': contentType,\n            ...(key && { 'Authorization': `Bearer ${key}` })\n        }\n    }\n)\n.then(function (response) {\n    console.log(\"Returned predictions: \", response.data)\n    \n    send(null, {\n        observedState: \"Collected\",\n        rawData: {\n            data: response.data\n        }\n    });\n})\n.catch(function (error) {\n    send(error, {\n        observedState : \"Not Collected\"\n    });\n})\n","metadata":{"author":"","description":"Azure ML endpoint invoker.\n<br>\nUsed to invoke a Azure ML endpoint run on the Azure platform.\n<br><br>\n<b>States</b>\n<br>\n<ul>\n    <li>\n        Not Collected: Indicates that no results are ready be due to an error.\n    </li>\n    <li>\n        Collected: Indicates that a request was made and the results are ready to use.\n    </li>\n</ul>\n<br>\n<b>Raw data</b>\n<ul>\n    <li>\n        data: This will contain the result returned by the Azure ML endpoint.\n    </li>\n</ul>\n<br>\n<b>Properties</b>\n<ul>\n    <li>\n        endpoint: The url to the Azure ML endpoint.\n    </li>\n    <li>\n        observations: The object with observations formated in the way that Azure ML endpoint expects.\n    </li>\n    <li>\n        contentType: The MIME type of the observations.\n    </li>\n    <li>\n        key: If the endpoint has authorisation this should be the key or token to gain access to it. To generate a key for your service please refere to the <a href=\"https://docs.microsoft.com/en-us/azure/machine-learning/how-to-setup-authentication#web-service-authentication\">official documentation</a>.\n    </li>\n</ul>","iconURL":"http://static.waylay.io/plugs/icons/azureml.png","supportedStates":["Uncollected","Collected"],"requiredProperties":["endpointUrl","observations","contentType","key"],"requiredRawData":[],"rawData":[]},"dependencies":{"axios":"0.19.2"}}
